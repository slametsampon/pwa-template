<!-- frontend/src/index.html -->

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <base href="__BASE_PATH__" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- âœ… SEO Meta Tags -->
    <title>pwa-template â€“ Starter SPA Template LitElement + Tailwind</title>
    <meta
      name="description"
      content="pwa-template adalah template proyek siap pakai untuk membangun antarmuka modular berbasis LitElement dan Tailwind CSS."
    />
    <meta
      name="keywords"
      content="pwa-template, LitElement, Tailwind CSS, Web Components, UI Template, Component Driven Development, esbuild"
    />
    <meta name="author" content="pwa-template contributors" />

    <!-- âœ… Open Graph / Social Media Sharing -->
    <meta
      property="og:title"
      content="pwa-template â€“ Starter Template LitElement + Tailwind"
    />
    <meta
      property="og:description"
      content="Template UI ringan dan modular berbasis Web Components. Cocok untuk proyek dashboard, IoT UI, dan aplikasi web modern."
    />
    <meta property="og:image" content="./assets/raw-logo-crop.png" />
    <meta property="og:url" content="https://yourdomain.com/pwa-template/" />
    <meta property="og:type" content="website" />

    <!-- âœ… Twitter Card Meta -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta
      name="twitter:title"
      content="pwa-template â€“ Template UI Modular dengan LitElement"
    />
    <meta
      name="twitter:description"
      content="Template Web Components modular siap pakai dengan dukungan Tailwind dan esbuild."
    />
    <meta name="twitter:image" content="./assets/raw-logo-crop.png" />
    <meta name="twitter:site" content="@yourhandle" />

    <!-- âœ… Favicon & Styles -->
    <link rel="icon" type="image/x-icon" href="./assets/favicon.ico" />
    <link rel="stylesheet" href="./style.css" />

    <!-- ðŸ”§ Base URL untuk backend/dev API (optional) -->
    <script>
      window.__API_BASE__ = 'http://127.0.0.1:8080';
    </script>

    <!-- âœ… Entry point -->
    <script type="module" src="./main.js"></script>

    <!-- âœ… PWA additional -->
    <link rel="manifest" href="./pwa/manifest.webmanifest" />
    <meta name="theme-color" content="#2563eb" />
  </head>
  <body class="bg-gray-100 font-sans text-gray-800">
    <!-- Root shell (routing + layout handled here) -->
    <app-shell></app-shell>

    <!-- ðŸ’¡ Komponen dialog (opsional, bisa dihapus jika belum digunakan) -->
    <!--
    <device-dialog></device-dialog>
    <plant-detail-dialog></plant-detail-dialog>
    <species-detail-dialog></species-detail-dialog>
    <livestock-detail-dialog></livestock-detail-dialog>
    -->
    <script>
      (function () {
        const env =
          (window && window.__ENV__) ||
          (typeof process !== 'undefined'
            ? process.env.NODE_ENV
            : 'production');
        const shouldRegister =
          typeof navigator !== 'undefined' &&
          'serviceWorker' in navigator &&
          (env === 'pre-release' || env === 'production');

        if (shouldRegister) {
          window.addEventListener('load', () => {
            navigator.serviceWorker
              .register('./pwa/service-worker.js')
              .then(() => console.log('âœ… SW registered'))
              .catch(console.error);
          });
        } else {
          // optional safety: pastikan tidak ada SW lama waktu dev
          if ('serviceWorker' in navigator) {
            navigator.serviceWorker
              .getRegistrations()
              .then((regs) => regs.forEach((r) => r.unregister()));
          }
        }
      })();
    </script>
  </body>
</html>
